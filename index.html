<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Extend Warranty</title>
</head>

<body>

    <form id="product-form" action="/cart/add">
        <div id="extend-offer"></div>
        <button id="add-to-cart" type="submit">Add To Cart</button>
    </form>

</body>

<script>
  

    $('#submitButton').on('click', function(event) {
                event.preventDefault()
                const component = Extend.buttons.instance('#extend-offer')
                const plan = component.getPlanSelection()
                Extend.modal.open({
                    referenceId: '{ product.variant[0].id }',
                    onClose: function(plan, product) {
                        if (plan && product) {
                            __YourAjaxLib__.addPlanToCart(plan, product, quantity, function() {
                                $('#add-to-cart-id').submit()
                            })
                        } else {
                            $('#add-to-cart-id').submit()
                        }
                    },
                })
            })

/** initialize offer */

//   Extend.buttons.render('#extend-offer', {
//         referenceId: '{ product.variant[0].id }',
//    })
//   Extend.modal.open({
//         referenceId: string,
//         onClose(plan ? : PlanSelection, product ? : ActiveProduct) {},
//   })

</script>


</html>
